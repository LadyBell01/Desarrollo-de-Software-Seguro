<ion-content [fullscreen]="true" class="detail-content">

  <!-- Loading skeleton -->
  <div *ngIf="loading" class="loading-container">
    <ion-skeleton-text animated style="width: 100%; height: 40vh;"></ion-skeleton-text>
    <div style="padding: 2rem;">
      <ion-skeleton-text animated style="width: 80%; height: 32px; margin-bottom: 1rem;"></ion-skeleton-text>
      <ion-skeleton-text animated style="width: 60%; height: 20px;"></ion-skeleton-text>
    </div>
  </div>

  <!-- Recipe content -->
  <div *ngIf="!loading && recipe">
    <div class="hero-image">
      <img [src]="recipe.strMealThumb" [alt]="recipe.strMeal">
      <div class="overlay"></div>
      <div class="header-actions">
        <ion-button fill="clear" class="back-btn" (click)="goBack()">
          <ion-icon name="arrow-back"></ion-icon>
        </ion-button>
        <ion-button fill="clear" class="share-btn">
          <ion-icon name="share-social-outline"></ion-icon>
        </ion-button>
      </div>
    </div>

    <div class="content-container">
      <div class="recipe-header">
        <div class="title-row">
          <h1>{{ recipe.strMeal }}</h1>
          <div class="rating">
            <ion-icon name="star"></ion-icon>
            <span>4.8</span>
            <span class="reviews">(124)</span>
          </div>
        </div>

        <div class="meta-row">
          <div class="meta-item">
            <ion-icon name="restaurant-outline"></ion-icon>
            <span>{{ recipe.strCategory }}</span>
          </div>
          <div class="meta-item">
            <ion-icon name="location-outline"></ion-icon>
            <span>{{ recipe.strArea }}</span>
          </div>
        </div>

        <div class="stats-row">
          <div class="stat-item">
            <ion-icon name="time-outline"></ion-icon>
            <span>30 min</span>
          </div>
          <div class="stat-item">
            <ion-icon name="flame-outline"></ion-icon>
            <span>320 kcal</span>
          </div>
          <div class="stat-item">
            <ion-icon name="bar-chart-outline"></ion-icon>
            <span>FÃ¡cil</span>
          </div>
        </div>
      </div>

      <div class="section">
        <h2>Ingredientes</h2>
        <div class="ingredients-list">
          <div class="ingredient-item" *ngFor="let ing of ingredients">
            <div class="check-circle">
              <ion-icon name="checkmark"></ion-icon>
            </div>
            <span class="name">{{ ing.name }}</span>
            <span class="amount">{{ ing.measure }}</span>
          </div>
        </div>
      </div>

      <div class="section">
        <h2>Instrucciones</h2>
        <div class="steps-list">
          <div class="step-item" *ngFor="let step of instructions; let i = index">
            <div class="step-number">{{ i + 1 }}</div>
            <p>{{ step }}</p>
          </div>
        </div>
      </div>

      <!-- Video if available -->
      <div class="section" *ngIf="recipe.strYoutube">
        <h2>Video Tutorial</h2>
        <div class="video-container">
          <ion-button expand="block" [href]="recipe.strYoutube" target="_blank">
            <ion-icon name="logo-youtube" slot="start"></ion-icon>
            Ver en YouTube
          </ion-button>
        </div>
      </div>
    </div>

    <ion-fab vertical="bottom" horizontal="end" slot="fixed">
      <ion-fab-button (click)="toggleFavorite()" [color]="isFavorite ? 'danger' : 'light'">
        <ion-icon [name]="isFavorite ? 'heart' : 'heart-outline'"></ion-icon>
      </ion-fab-button>
    </ion-fab>
  </div>

  <!-- Error state -->
  <div *ngIf="!loading && !recipe" class="error-state">
    <ion-icon name="alert-circle-outline"></ion-icon>
    <p>No se pudo cargar la receta</p>
    <ion-button (click)="goBack()">Volver</ion-button>
  </div>

</ion-content>